<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#667eea">
    <link rel="manifest" href="../manifest.json">
    <link rel="apple-touch-icon" href="../icons/apple-touch-icon.png">
    <title>ğŸ–¼ï¸ ç¬¬äºŒé—œï¼šåœ–ç‰‡è­˜å­—</title>
    <script src="../js/prevent-zoom.js" defer></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            font-family: 'Microsoft JhengHei', 'PingFang TC', sans-serif;
            padding: 20px;
        }

        .nav-bar {
            background: rgba(255,255,255,0.95);
            padding: 15px 20px;
            border-radius: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .back-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 14px 24px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .back-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);
        }
        .back-btn:active {
            transform: scale(0.95);
        }
        .nav-title {
            font-size: 1.3rem;
            color: #11998e;
            font-weight: bold;
        }
        .progress-info {
            font-size: 1rem;
            color: #38ef7d;
            font-weight: bold;
        }

        .page-title {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }
        .page-title h1 {
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            margin-bottom: 10px;
        }
        .page-title p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            max-width: 1000px;
            margin: 0 auto;
        }

        .game-card {
            background: white;
            border-radius: 25px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            text-decoration: none;
            color: inherit;
            display: block;
        }
        .game-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }

        .game-icon {
            font-size: 3.5rem;
            margin-bottom: 15px;
        }
        .game-name {
            font-size: 1.5rem;
            color: #11998e;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .game-desc {
            color: #666;
            font-size: 0.95rem;
            line-height: 1.5;
            margin-bottom: 15px;
        }
        .game-badge {
            display: inline-block;
            padding: 6px 16px;
            border-radius: 15px;
            font-size: 0.85rem;
            font-weight: bold;
        }
        .badge-easy { background: #e8f5e9; color: #4caf50; }
        .badge-medium { background: #fff3e0; color: #ff9800; }
        .badge-hard { background: #fce4ec; color: #e91e63; }

        /* åˆ†é¡é¸æ“‡å€ */
        .category-section {
            background: rgba(255,255,255,0.15);
            border-radius: 20px;
            padding: 25px;
            margin-top: 40px;
            max-width: 1000px;
            margin-left: auto;
            margin-right: auto;
        }
        .category-section h3 {
            color: white;
            font-size: 1.3rem;
            margin-bottom: 20px;
            text-align: center;
        }
        .category-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }
        .category-chip {
            background: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .category-chip:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        .category-chip .count {
            background: #e0e0e0;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.8rem;
            color: #666;
        }

        @media (max-width: 768px) {
            .page-title h1 { font-size: 2rem; }
            .game-icon { font-size: 3rem; }
            .game-name { font-size: 1.3rem; }
        }
    </style>
</head>
<body>
    <nav class="nav-bar">
        <a href="../index.html" class="back-btn">â† è¿”å›é¦–é </a>
        <div class="nav-title">ç¬¬äºŒé—œ</div>
        <div class="progress-info">å·²å­¸æœƒï¼š<span id="masteredCount">0</span> è©</div>
    </nav>

    <div class="page-title">
        <h1>ğŸ–¼ï¸ åœ–ç‰‡è­˜å­—</h1>
        <p>å°‡æ³¨éŸ³èˆ‡å¯¦éš›è©å½™ã€åœ–åƒé€£çµ</p>
    </div>

    <div class="games-grid">
        <!-- 2-1 çœ‹åœ–å­¸è© -->
        <a href="games/learn-words.html" class="game-card">
            <div class="game-icon">ğŸ“š</div>
            <div class="game-name">çœ‹åœ–å­¸è©</div>
            <div class="game-desc">çœ‹åœ–ç‰‡å’Œæ³¨éŸ³<br>è½ç™¼éŸ³ï¼Œè·Ÿè‘—å”¸</div>
            <span class="game-badge badge-easy">å…¥é–€</span>
        </a>

        <!-- 2-2 è½éŸ³é¸åœ– -->
        <a href="games/listen-choose-image.html" class="game-card">
            <div class="game-icon">ğŸ‘‚</div>
            <div class="game-name">è½éŸ³é¸åœ–</div>
            <div class="game-desc">è½è©å½™ç™¼éŸ³<br>å¾å››å¼µåœ–ä¸­é¸æ­£ç¢ºçš„</div>
            <span class="game-badge badge-easy">å…¥é–€</span>
        </a>

        <!-- 2-3 çœ‹åœ–é¸å­— -->
        <a href="games/image-choose-word.html" class="game-card">
            <div class="game-icon">ğŸ”</div>
            <div class="game-name">çœ‹åœ–é¸å­—</div>
            <div class="game-desc">çœ‹åœ–ç‰‡<br>å¾å››å€‹è©å½™ä¸­é¸æ­£ç¢ºçš„</div>
            <span class="game-badge badge-medium">é€²éš</span>
        </a>

        <!-- 2-4 åœ–æ–‡é…å° -->
        <a href="games/drag-match.html" class="game-card">
            <div class="game-icon">ğŸ¯</div>
            <div class="game-name">åœ–æ–‡é…å°</div>
            <div class="game-desc">æ‹–æ›³åœ–ç‰‡<br>é…å°åˆ°æ­£ç¢ºçš„è©å½™</div>
            <span class="game-badge badge-medium">é€²éš</span>
        </a>

        <!-- 2-5 è¨˜æ†¶ç¿»ç‰Œ -->
        <a href="games/memory-image.html" class="game-card">
            <div class="game-icon">ğŸƒ</div>
            <div class="game-name">è¨˜æ†¶ç¿»ç‰Œ</div>
            <div class="game-desc">ç¿»ç‰Œé…å°<br>åœ–ç‰‡èˆ‡è©å½™çš„è¨˜æ†¶éŠæˆ²</div>
            <span class="game-badge badge-medium">é€²éš</span>
        </a>

        <!-- 2-6 å”¸å”¸çœ‹ -->
        <a href="games/speak-word.html" class="game-card">
            <div class="game-icon">ğŸ¤</div>
            <div class="game-name">å”¸å”¸çœ‹</div>
            <div class="game-desc">çœ‹åœ–èªªå‡ºè©å½™<br>èªéŸ³è¾¨è­˜å³æ™‚å›é¥‹</div>
            <span class="game-badge badge-hard">æŒ‘æˆ°</span>
        </a>

        <!-- 2-7 æ•¸å­—ç·´ç¿’ -->
        <a href="games/number-practice.html" class="game-card">
            <div class="game-icon">ğŸ”¢</div>
            <div class="game-name">æ•¸å­—ç·´ç¿’</div>
            <div class="game-desc">å­¸ç¿’æ•¸å­— 0-30 çš„ç™¼éŸ³<br>è½éŸ³é¸æ•¸ã€çœ‹æ•¸å”¸å‡º</div>
            <span class="game-badge badge-medium">é€²éš</span>
        </a>
    </div>

    <div class="category-section">
        <h3>ğŸ“‚ è©å½™åˆ†é¡</h3>
        <div class="category-chips" id="categoryChips"></div>
    </div>

    <script>
        const CATEGORIES = {
            family: { name: 'å®¶äºº', icon: 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§', count: 12 },
            animals: { name: 'å‹•ç‰©', icon: 'ğŸ¾', count: 14 },
            fruits: { name: 'æ°´æœ', icon: 'ğŸ', count: 12 },
            items: { name: 'æ—¥å¸¸ç”¨å“', icon: 'ğŸ“¦', count: 12 },
            food: { name: 'é£Ÿç‰©', icon: 'ğŸœ', count: 12 },
            actions: { name: 'å‹•ä½œ', icon: 'ğŸƒ', count: 12 },
            body: { name: 'èº«é«”', icon: 'ğŸ§', count: 10 },
            nature: { name: 'è‡ªç„¶', icon: 'ğŸŒ³', count: 12 }
        };

        function loadProgress() {
            const mastered = JSON.parse(localStorage.getItem('masteredWords_level2') || '{}');
            let total = 0;
            for (const cat of Object.keys(mastered)) {
                total += Object.keys(mastered[cat]).length;
            }
            document.getElementById('masteredCount').textContent = total;
        }

        function renderCategories() {
            const container = document.getElementById('categoryChips');
            container.innerHTML = '';

            for (const [key, cat] of Object.entries(CATEGORIES)) {
                const chip = document.createElement('div');
                chip.className = 'category-chip';
                chip.innerHTML = `${cat.icon} ${cat.name} <span class="count">${cat.count}</span>`;
                chip.onclick = () => {
                    localStorage.setItem('selectedCategory', key);
                    location.href = 'games/learn-words.html';
                };
                container.appendChild(chip);
            }
        }

        // èªéŸ³åˆæˆèªªè©±åŠŸèƒ½
        function speak(text, callback) {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'zh-TW';
                utterance.rate = 0.85;
                utterance.pitch = 1.1;
                if (callback) {
                    utterance.onend = callback;
                }
                window.speechSynthesis.speak(utterance);
            }
        }

        // é å…ˆè¼‰å…¥èªéŸ³å¼•æ“
        function initVoices() {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.getVoices();
                window.speechSynthesis.onvoiceschanged = () => {};
            }
        }

        // æ­¡è¿èªéŸ³å¼•å°
        let hasPlayedWelcome = false;
        function welcomeGuide() {
            if (hasPlayedWelcome) return;
            hasPlayedWelcome = true;

            // å¦‚æœå·²ç¶“åœ¨é¦–é æ’­æ”¾éæ­¡è¿èªï¼Œåªæ’­æ”¾ç°¡çŸ­æç¤º
            const welcomePlayed = sessionStorage.getItem('welcomePlayed');
            setTimeout(() => {
                if (welcomePlayed) {
                    speak('ç¬¬äºŒé—œï¼Œåœ–ç‰‡è­˜å­—ï¼è«‹é¸æ“‡ä¸€å€‹éŠæˆ²ã€‚');
                } else {
                    speak('æ­¡è¿ä¾†åˆ°ç¬¬äºŒé—œï¼Œåœ–ç‰‡è­˜å­—ï¼é€™è£¡æœ‰ä¸ƒå€‹éŠæˆ²ï¼Œå¹«åŠ©ä½ èªè­˜è©å½™å’Œåœ–ç‰‡ã€‚', () => {
                        setTimeout(() => {
                            speak('å»ºè­°å¾ã€Œçœ‹åœ–å­¸è©ã€é–‹å§‹ï¼Œçœ‹åœ–ç‰‡ã€è½ç™¼éŸ³ã€å­¸è©å½™ï¼');
                        }, 800);
                    });
                }
            }, 500);
        }

        loadProgress();
        renderCategories();
        initVoices();
        // æ‰€æœ‰ç€è¦½å™¨éƒ½éœ€è¦ç”¨æˆ¶äº’å‹•æ‰èƒ½æ’­æ”¾èªéŸ³
        document.addEventListener('touchstart', welcomeGuide, { once: true });
        document.addEventListener('click', welcomeGuide, { once: true });
    </script>
</body>
</html>
